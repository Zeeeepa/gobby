============================= test session starts ==============================
platform darwin -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /Users/josh/Projects/gobby
configfile: pyproject.toml
testpaths: tests
plugins: mock-3.15.1, anyio-4.12.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 8113 items

tests/adapters/test_base.py ..............................               [  0%]
tests/adapters/test_codex.py ........................................... [  0%]
.....................................................                    [  1%]
tests/adapters/test_gemini.py .......................................... [  2%]
....................................................                     [  2%]
tests/agents/spawners/test_embedded_spawner.py ......................... [  3%]
.........................                                                [  3%]
tests/agents/spawners/test_headless_spawner.py ......................... [  3%]
..........................................                               [  4%]
tests/agents/spawners/test_windows_spawner.py .......................... [  4%]
.......................................................ss                [  5%]
tests/agents/test_constants.py ..........                                [  5%]
tests/agents/test_context_integration.py .............                   [  5%]
tests/agents/test_context_resolver.py ................................   [  5%]
tests/agents/test_definitions.py .......s                                [  5%]
tests/agents/test_registry.py .......................................... [  6%]
..........................                                               [  6%]
tests/agents/test_runner.py ............................................ [  7%]
........................                                                 [  7%]
tests/agents/test_runner_agents.py .                                     [  7%]
tests/agents/test_session.py .........................                   [  7%]
tests/agents/test_spawn.py ............................................. [  8%]
........................................................................ [  9%]
...........                                                              [  9%]
tests/agents/test_spawners.py .......................................... [ 10%]
..............................................................           [ 10%]
tests/agents/test_tty_config.py ........................................ [ 11%]
........................................                                 [ 11%]
tests/autonomous/test_autonomous.py .................................... [ 12%]
.............................................                            [ 12%]
tests/cli/installers/test_antigravity.py .....                           [ 12%]
tests/cli/installers/test_claude.py ...............................      [ 13%]
tests/cli/installers/test_codex_installer.py ........................... [ 13%]
........                                                                 [ 13%]
tests/cli/installers/test_gemini_installer.py .......................... [ 13%]
....                                                                     [ 14%]
tests/cli/installers/test_git_hooks_installer.py ....................... [ 14%]
...............................                                          [ 14%]
tests/cli/installers/test_shared.py .................................... [ 15%]
...................                                                      [ 15%]
tests/cli/tasks/test_task_id_resolution.py ................              [ 15%]
tests/cli/test_cli.py ............................                       [ 15%]
tests/cli/test_cli_agents.py ........................................... [ 16%]
......................                                                   [ 16%]
tests/cli/test_cli_artifacts.py ........................                 [ 17%]
tests/cli/test_cli_daemon.py ...............................             [ 17%]
tests/cli/test_cli_extensions.py ....................................... [ 17%]
...............................                                          [ 18%]
tests/cli/test_cli_init.py ...........................                   [ 18%]
tests/cli/test_cli_install.py ............F............................. [ 19%]
.............                                                            [ 19%]
tests/cli/test_import.py ..                                              [ 19%]
tests/cli/test_merge_cli.py .........................                    [ 19%]
tests/cli/test_stealth.py ..                                             [ 19%]
tests/cli/test_task_resolution.py ..                                     [ 19%]
tests/cli/test_tasks_cli.py ............................................ [ 20%]
............................................                             [ 20%]
tests/cli/test_tasks_commits.py ..................                       [ 20%]
tests/cli/test_tasks_expand.py .                                         [ 20%]
tests/cli/test_validation_cli.py ..............................          [ 21%]
tests/config/test_app_config.py ........................................ [ 21%]
........................................................                 [ 22%]
tests/config/test_extensions.py ........................................ [ 23%]
..                                                                       [ 23%]
tests/config/test_llm_providers.py ....................                  [ 23%]
tests/config/test_logging.py ..............                              [ 23%]
tests/config/test_mcp_config.py ...............................          [ 23%]
tests/config/test_persistence.py ...............                         [ 24%]
tests/config/test_servers.py ...........................                 [ 24%]
tests/config/test_tasks.py ............................................. [ 24%]
......................................                                   [ 25%]
tests/e2e/test_crash_recovery.py .......                                 [ 25%]
tests/e2e/test_daemon_lifecycle.py ..........                            [ 25%]
tests/e2e/test_e2e_smoke.py .......                                      [ 25%]
tests/e2e/test_full_workflow.py ...                                      [ 25%]
tests/e2e/test_mcp_proxy_e2e.py ................                         [ 25%]
tests/e2e/test_session_tracking.py .........                             [ 26%]
tests/e2e/test_worktrees_e2e.py ................                         [ 26%]
tests/examples/test_code_guardian.py ......................              [ 26%]
tests/hooks/test_api_messages.py ...                                     [ 26%]
tests/hooks/test_broadcaster.py .....                                    [ 26%]
tests/hooks/test_config_hook_extensions.py ..                            [ 26%]
tests/hooks/test_event_handlers.py ..................................... [ 27%]
........................................................................ [ 27%]
......                                                                   [ 28%]
tests/hooks/test_events.py .......                                       [ 28%]
tests/hooks/test_health_monitor.py ...........................           [ 28%]
tests/hooks/test_hook_types.py ......................................... [ 28%]
.........                                                                [ 29%]
tests/hooks/test_hooks_context.py ..                                     [ 29%]
tests/hooks/test_hooks_events.py .....................                   [ 29%]
tests/hooks/test_hooks_manager.py ...................................... [ 29%]
..................................                                       [ 30%]
tests/hooks/test_plugins.py ............................................ [ 30%]
.....................................................                    [ 31%]
tests/hooks/test_session_coordinator.py ................................ [ 31%]
.                                                                        [ 31%]
tests/hooks/test_webhooks.py ....................                        [ 32%]
tests/integration/test_agent_execution.py .....................          [ 32%]
tests/integration/test_hub_query.py ............                         [ 32%]
tests/integration/test_start_agent_tool.py ..........                    [ 32%]
tests/integration/test_task_expansion_flow.py ...                        [ 32%]
tests/integration/test_tdd_mode_workflow.py ...........                  [ 32%]
tests/integration/test_tdd_ordering_e2e.py F.....FF.                     [ 32%]
tests/integration/test_terminal_mode_worktrees.py ...................... [ 33%]
..................                                                       [ 33%]
tests/integration/test_workflow_tool_filtering.py ...................... [ 33%]
                                                                         [ 33%]
tests/integration/test_worktree_lifecycle.py ........................... [ 34%]
.......                                                                  [ 34%]
tests/integration/test_worktree_merge_integration.py .....sss........... [ 34%]
...                                                                      [ 34%]
tests/integrations/test_github.py ..............                         [ 34%]
tests/integrations/test_linear.py ..............                         [ 34%]
tests/llm/test_claude_executor.py ........................               [ 35%]
tests/llm/test_claude_provider.py ......                                 [ 35%]
tests/llm/test_codex_executor.py ....................................... [ 35%]
..                                                                       [ 35%]
tests/llm/test_executor.py ...........................                   [ 35%]
tests/llm/test_gemini_executor.py ..................                     [ 36%]
tests/llm/test_litellm_executor.py ....................                  [ 36%]
tests/llm/test_llm_claude.py ........................................... [ 36%]
.                                                                        [ 36%]
tests/llm/test_llm_codex.py ............                                 [ 37%]
tests/llm/test_llm_litellm.py ...........                                [ 37%]
tests/llm/test_llm_service.py ................                           [ 37%]
tests/llm/test_resolver.py ............................................. [ 37%]
.............................                                            [ 38%]
tests/mcp_proxy/services/test_system.py ................................ [ 38%]
.........                                                                [ 38%]
tests/mcp_proxy/services/test_tool_proxy_validation.py ...............   [ 39%]
tests/mcp_proxy/test_actions.py .......................................  [ 39%]
tests/mcp_proxy/test_artifacts_server.py ...................             [ 39%]
tests/mcp_proxy/test_fallback_resolver.py ................               [ 39%]
tests/mcp_proxy/test_gobby_daemon_tools.py ...........................   [ 40%]
tests/mcp_proxy/test_lazy.py ........................................... [ 40%]
.....                                                                    [ 40%]
tests/mcp_proxy/test_manager_coverage.py ............................... [ 41%]
.......................................                                  [ 41%]
tests/mcp_proxy/test_mcp_actions.py .............                        [ 41%]
tests/mcp_proxy/test_mcp_manager.py ...................................  [ 42%]
tests/mcp_proxy/test_mcp_proxy_importer.py ............................. [ 42%]
....                                                                     [ 42%]
tests/mcp_proxy/test_mcp_proxy_stdio.py ................................ [ 43%]
.....                                                                    [ 43%]
tests/mcp_proxy/test_mcp_tools.py .........F............                 [ 43%]
tests/mcp_proxy/test_mcp_tools_session_messages.py ..................... [ 43%]
..........                                                               [ 43%]
tests/mcp_proxy/test_merge_integration.py .                              [ 43%]
tests/mcp_proxy/test_proxy_server.py ..........s                         [ 43%]
tests/mcp_proxy/test_registries.py .                                     [ 43%]
tests/mcp_proxy/test_semantic_search.py ................................ [ 44%]
......                                                                   [ 44%]
tests/mcp_proxy/test_server_mgmt.py ........                             [ 44%]
tests/mcp_proxy/test_tool_filter.py ........................             [ 44%]
tests/mcp_proxy/test_validation_integration.py .....................     [ 45%]
tests/mcp_proxy/test_validation_mcp_tools.py ..F........................ [ 45%]
....                                                                     [ 45%]
tests/mcp_proxy/tools/test_agents.py ................................... [ 45%]
...........                                                              [ 46%]
tests/mcp_proxy/tools/test_ancestry_proximity_scoring.py ............... [ 46%]
..                                                                       [ 46%]
tests/mcp_proxy/tools/test_hub.py ...............                        [ 46%]
tests/mcp_proxy/tools/test_session_messages_coverage.py ................ [ 46%]
.........................................................                [ 47%]
tests/mcp_proxy/tools/test_task_dependencies.py .FFFFFFFFFFFFFF          [ 47%]
tests/mcp_proxy/tools/test_task_expansion.py ...F....................... [ 47%]
..............F............................                              [ 48%]
tests/mcp_proxy/tools/test_task_id_resolution.py .............           [ 48%]
tests/mcp_proxy/tools/test_task_readiness.py ..........................  [ 48%]
tests/mcp_proxy/tools/test_task_sync.py FFFFF................            [ 49%]
tests/mcp_proxy/tools/test_tasks_coverage.py ........................... [ 49%]
.......................................                                  [ 49%]
tests/mcp_proxy/tools/test_tasks_validation.py ....F......F..F.F........ [ 50%]
...F..F....                                                              [ 50%]
tests/mcp_proxy/tools/test_tdd_mode_routing.py ...........               [ 50%]
tests/mcp_proxy/tools/test_tool_verbosity.py ....                        [ 50%]
tests/mcp_proxy/tools/test_workflow_circumvention.py ...........         [ 50%]
tests/mcp_proxy/tools/test_workflow_project_path.py ..............       [ 50%]
tests/mcp_proxy/transports/test_base.py ................................ [ 51%]
..................                                                       [ 51%]
tests/memory/test_context.py ...........                                 [ 51%]
tests/memory/test_manager.py ........................................... [ 52%]
                                                                         [ 52%]
tests/memory/test_v2_features.py ......................                  [ 52%]
tests/merge/test_conflicts.py ...........................                [ 52%]
tests/merge/test_merge_mcp_tools.py ..........................           [ 53%]
tests/merge/test_merge_storage.py ...................................... [ 53%]
.                                                                        [ 53%]
tests/merge/test_resolver.py .......................                     [ 53%]
tests/plugins/test_example_notify.py .......................             [ 54%]
tests/servers/routes/test_admin.py ....                                  [ 54%]
tests/servers/test_http_broadcaster.py .                                 [ 54%]
tests/servers/test_http_coverage.py ..............................F..... [ 54%]
...................................                                      [ 55%]
tests/servers/test_http_server.py ...................................... [ 55%]
...............                                                          [ 55%]
tests/servers/test_mcp_routes.py ....................................... [ 56%]
................................................                         [ 56%]
tests/servers/test_sessions_routes.py ................................   [ 57%]
tests/servers/test_websocket_subscriptions.py ....                       [ 57%]
tests/sessions/test_analyzer.py ........................................ [ 57%]
.........................                                                [ 58%]
tests/sessions/test_e2e_session_tracking.py .                            [ 58%]
tests/sessions/test_lifecycle.py ................                        [ 58%]
tests/sessions/test_sessions_manager.py ............................     [ 58%]
tests/sessions/test_sessions_processor_integration.py ....               [ 58%]
tests/sessions/test_sessions_processor_unit.py ......................... [ 58%]
.                                                                        [ 58%]
tests/sessions/test_summary.py ......................................... [ 59%]
...............                                                          [ 59%]
tests/sessions/test_token_usage.py .                                     [ 59%]
tests/sessions/test_transcript_parsers.py ...................            [ 59%]
tests/storage/test_artifact_classifier.py .............................. [ 60%]
.....................                                                    [ 60%]
tests/storage/test_audit_coverage.py .....                               [ 60%]
tests/storage/test_compaction.py ...                                     [ 60%]
tests/storage/test_memory_manager.py ..............                      [ 60%]
tests/storage/test_storage_agents.py ................................... [ 61%]
............................                                             [ 61%]
tests/storage/test_storage_artifacts.py ................................ [ 61%]
...............                                                          [ 62%]
tests/storage/test_storage_database.py ..................                [ 62%]
tests/storage/test_storage_mcp.py ...................................... [ 62%]
.................                                                        [ 63%]
tests/storage/test_storage_memories.py ...........................       [ 63%]
tests/storage/test_storage_migrations.py ............................... [ 63%]
......                                                                   [ 63%]
tests/storage/test_storage_projects.py ....................              [ 64%]
tests/storage/test_storage_session_messages.py ..............            [ 64%]
tests/storage/test_storage_session_tasks.py ......                       [ 64%]
tests/storage/test_storage_sessions.py ................................. [ 64%]
...................................                                      [ 65%]
tests/storage/test_storage_task_dependencies.py ...........              [ 65%]
tests/storage/test_storage_tasks.py .................................... [ 65%]
............................................................