{"id": "mm-6138c752", "content": "The gobby project uses a two-tier workflow architecture: meeseeks-box.yaml (parent) spawns child agents using gobby-agents.spawn_agent, while meeseeks.yaml (child) runs ON spawned agents with a specific lifecycle: get_session → claim_task → search_memory → search_context → save_findings → work → summarize → report_to_parent → shutdown.", "type": "fact", "importance": 0.95, "tags": ["workflow-architecture", "meeseeks", "agent-spawning"], "created_at": "2026-01-28T20:38:12.074109+00:00", "updated_at": "2026-01-28T20:38:12.074109+00:00", "source": "session", "source_id": "8cc46e99-2e03-41f8-ba7e-7ad372450e56"}
{"id": "mm-98648f97", "content": "Gobby uses Pydantic BaseModel for config classes (e.g., SkillsConfig in config/skills.py) and dataclasses for storage models (e.g., Skill in storage/skills.py with source_type, source_path, source_ref fields). Provider abstractions follow ABC pattern with @abstractmethod decorators, matching the LLMProvider style in llm/base.py.", "type": "pattern", "importance": 0.95, "tags": ["architecture", "config", "providers", "models"], "created_at": "2026-01-28T20:13:58.013845+00:00", "updated_at": "2026-01-28T20:13:58.013845+00:00", "source": "session", "source_id": "0c872236-ce01-4ecd-912b-6afdc5dd393f"}
{"id": "mm-345741a5", "content": "The gobby project has significant documentation drift: mcp-tools.md documents only ~20-30% of actual tools (9 entire categories missing), cli-commands.md is missing 13+ command groups, tasks.md documents non-existent tools (expand_task, apply_tdd, analyze_complexity), and memory.md has incorrect tool names (remember→create_memory, add→create). Accuracy fixes should be prioritized before creating new documentation.", "type": "context", "importance": 0.95, "tags": ["documentation", "gobby", "accuracy-issues", "priority"], "created_at": "2026-01-28T16:21:49.019112+00:00", "updated_at": "2026-01-28T16:21:49.019112+00:00", "source": "session", "source_id": "1cd214d0-1e0d-4983-a94a-93a041119ba5"}
{"id": "mm-39112358", "content": "The gobby project uses a 'Strangler Fig' refactoring pattern to decompose monolithic modules into smaller, focused components. Phase 1 decomposes session_messages.py into a sessions/ package with specialized modules (_handoff.py, _messages.py, _crud.py, _commits.py, _factory.py). Phase 2 refactors MemoryManager into component classes (SearchCoordinator, MultimodalIngestor, CrossrefService). Phase 3 extracts task_enforcement_actions.py into an enforcement/ package with blocking.py, commit_policy.py, task_policy.py.", "type": "fact", "importance": 0.95, "tags": ["architecture", "refactoring", "decomposition", "strangler-fig"], "created_at": "2026-01-28T01:59:09.435744+00:00", "updated_at": "2026-01-28T01:59:09.435744+00:00", "source": "session", "source_id": "d6068bb9-78b2-4941-9de3-e4e4fe940a4f"}
{"id": "mm-a1360b29", "content": "Gobby project uses strangler-fig decomposition pattern to refactor large modules. Current targets: actions.py (<400 lines, 49 wrappers remain), tools.py (<100 lines), codex.py (<200 lines), migrations.py (flatten with legacy). Implementation follows /gobby plan skill with Root epic → Phase epics → Feature tasks hierarchy.", "type": "context", "importance": 0.95, "tags": ["gobby", "refactoring", "architecture", "strangler-fig"], "created_at": "2026-01-26T23:05:30.973935+00:00", "updated_at": "2026-01-26T23:05:30.973935+00:00", "source": "session", "source_id": "c939a49c-67ad-433f-bc8f-defdac852772"}
{"id": "mm-fad146df", "content": "Plan files in `.gobby/plans/` must follow expand-ready format: tasks need explicit `(category: code|config|test|docs|refactor|research|planning|manual)` annotations, `(depends: TaskName)` or `(depends: Phase N)` dependency notation, and a Task Mapping table at the bottom for task references. The `/g expand` command uses this format to auto-generate TDD triplets for code/config tasks.", "type": "pattern", "importance": 0.95, "tags": ["gobby", "plan-format", "expand-command", "task-structure"], "created_at": "2026-01-26T22:18:20.049027+00:00", "updated_at": "2026-01-26T22:18:20.049027+00:00", "source": "session", "source_id": "1b365507-fea8-4662-a6c5-62caef8f48ea"}
{"id": "mm-ef920a2b", "content": "Gobby's spawn architecture uses three spawner types (TerminalSpawner, EmbeddedSpawner, HeadlessSpawner) from spawn.py. Agent isolation is handled by WorktreeGitManager and CloneGitManager, with ~350 lines of duplicated spawn logic in spawn_agent_in_worktree and ~300 lines in spawn_agent_in_clone that should be unified.", "type": "fact", "importance": 0.95, "tags": ["architecture", "spawn-system", "git-isolation", "refactoring-target"], "created_at": "2026-01-26T17:11:39.633055+00:00", "updated_at": "2026-01-26T17:11:39.633055+00:00", "source": "session", "source_id": "8d582fd9-8c4b-48bf-949b-3d2f353527c9"}
{"id": "mm-5a96d183", "content": "Gobby project uses a unified installer that copies CLI-specific commands via install_cli_content(). Each CLI has its own directory: Claude uses Markdown in src/gobby/install/claude/commands/ → .claude/commands/, Gemini uses TOML in src/gobby/install/gemini/commands/ → .gemini/commands/, and Codex uses Markdown in src/gobby/install/codex/prompts/ → .codex/prompts/.", "type": "fact", "importance": 0.95, "tags": ["architecture", "installer", "multi-cli", "file-paths"], "created_at": "2026-01-26T15:19:56.014629+00:00", "updated_at": "2026-01-26T15:19:56.014629+00:00", "source": "session", "source_id": "1f0eb083-9ebd-4c61-8ea3-0e9fd78037e2"}
{"id": "mm-1398a1ab", "content": "The gobby project uses a unified spawn_agent API design with these key parameters: prompt (required), agent='generic' (default), isolation='current'|'worktree'|'clone'. Anonymous spawning defaults to 'generic' agent which uses bundled generic-agent.yaml and generic-workflow.yaml templates.", "type": "fact", "importance": 0.95, "tags": ["spawn_agent", "API_design", "gobby", "agent_spawning"], "created_at": "2026-01-26T14:05:26.282092+00:00", "updated_at": "2026-01-26T14:05:26.282092+00:00", "source": "session", "source_id": "dc91e716-6e3a-4958-a18f-599e9bc18341"}
{"id": "mm-a3743a20", "content": "The gobby project uses a multi-CLI installation model with four supported CLIs: Claude, Gemini, Codex, and Antigravity. Workflow files must be maintained in three locations: source shared version (src/gobby/install/shared/workflows/), installed versions for each CLI (.claude/, .gemini/, .codex/, .antigravity/), and project-level versions (.gobby/workflows/).", "type": "fact", "importance": 0.95, "tags": ["architecture", "file-organization", "installation", "multi-cli"], "created_at": "2026-01-26T02:57:07.741841+00:00", "updated_at": "2026-01-26T02:57:07.741841+00:00", "source": "session", "source_id": "1d0c2cb9-eb49-4dc2-8480-b01ade18895e"}
{"id": "mm-052d36a2", "content": "In gobby's logging configuration, setup_file_logging() sets propagate=False on the gobby package logger to prevent duplicate logs. This breaks pytest's caplog fixture because caplog captures via root logger handlers and depends on propagation. Tests need either a fixture enabling propagate=True during test execution, or should avoid using caplog.at_level(logger='gobby.utils.git') in favor of capturing all logs.", "type": "context", "importance": 0.95, "tags": ["logging", "testing", "caplog", "pytest", "gobby-logger-config"], "created_at": "2026-01-25T20:04:09.517652+00:00", "updated_at": "2026-01-25T20:04:09.517652+00:00", "source": "session", "source_id": "4042c9be-18da-4d31-9039-027a93af8c78"}
{"id": "mm-3eb24810", "content": "The gobby project is transitioning workflows from global (~/.gobby/workflows/) to project-only (.gobby/workflows/) storage. This requires removing global_dirs defaults from WorkflowLoader, eliminating --global flags from CLI, and removing is_global parameters from MCP tools across: loader.py, hook_manager.py, cli/workflows.py, mcp_proxy/tools/workflows.py, and cli/installers/codex.py.", "type": "context", "importance": 0.95, "tags": ["workflows", "architecture-change", "refactoring-scope"], "created_at": "2026-01-25T18:46:30.280702+00:00", "updated_at": "2026-01-25T18:46:30.280702+00:00", "source": "session", "source_id": "598eabaa-1caa-40d8-8166-309b8ff8ba9c"}
{"id": "mm-86377881", "content": "gobby-skills is the single source of truth for bundled skills. It contains 24 skills total: 17 original gobby-* skills (gobby-agents, gobby-clones, gobby-diagnostic, gobby-expand, gobby-mcp, gobby-memory, gobby-merge, gobby-metrics, gobby-plan, gobby-sessions, gobby-tasks, gobby-workflows, gobby-worktrees) + 5 helper skills (claiming-tasks, committing-changes, discovering-tools, starting-sessions) + 7 quick task skills (bug, chore, epic, eval, feat, nit, ref). Duplicate skill directories in .claude/skills/gobby-* and .claude/commands/gobby/ should be deleted to maintain single source of truth.", "type": "fact", "importance": 0.95, "tags": ["gobby-skills", "architecture", "skill-organization"], "created_at": "2026-01-25T18:18:01.196567+00:00", "updated_at": "2026-01-25T18:18:01.196567+00:00", "source": "session", "source_id": "8ba09a43-3c3f-442c-9cdf-555cb2f38851"}
{"id": "mm-414c0ecb", "content": "Claude Code doesn't include tool_result in post-tool-use hooks, causing detection_helpers.py to receive empty tool_output dicts. This breaks error detection in detect_task_claim for close_task validation - when close_task fails validation (e.g., 'no_commits_linked'), the empty tool_output passes all error checks and incorrectly clears task_claimed=False.", "type": "fact", "importance": 0.95, "tags": ["claude-code-limitation", "detection_helpers", "close_task", "task_claimed", "bug-root-cause"], "created_at": "2026-01-25T17:14:28.198509+00:00", "updated_at": "2026-01-25T17:14:28.198509+00:00", "source": "session", "source_id": "b08118fe-cfa2-4c04-b92a-d381c05e7eda"}
{"id": "mm-a9c13ab0", "content": "Gobby requires explicit task claiming before file edits are permitted. Use create_task with claim: true parameter or claim_task tool to enable write access. The hook system enforces this via PreToolUse validation.", "type": "pattern", "importance": 0.95, "tags": ["task-management", "workflow", "write-access", "hooks"], "created_at": "2026-01-25T17:02:58.234367+00:00", "updated_at": "2026-01-25T17:02:58.234367+00:00", "source": "session", "source_id": "510d507d-f02a-47d5-8b8c-5c8fc2299ab3"}
{"id": "mm-d6e6113c", "content": "Gobby project uses a daemon architecture with skill management. Skills are stored in ~/.claude/skills/ directory with SKILL.md files. The daemon needs to be restarted after deleting stale skill references to trigger re-syncing from the authoritative source at src/gobby/install/shared/skills/.", "type": "fact", "importance": 0.9, "tags": ["gobby", "architecture", "daemon", "skills", "file-structure"], "created_at": "2026-01-28T21:50:47.415993+00:00", "updated_at": "2026-01-28T21:50:47.415993+00:00", "source": "session", "source_id": "bf024d3e-66a5-4af6-a500-ac36456674a3"}
{"id": "mm-1bc61281", "content": "The gobby task system provides `wait_for_task(task_id, timeout=600, poll_interval=5.0)` tool that blocks a parent agent until a child task reaches 'closed' status. This tool handles internal polling at the specified interval, eliminating the need for manual polling loops in the meeseeks-box workflow pattern.", "type": "fact", "importance": 0.9, "tags": ["gobby-tasks", "wait_for_task", "task-coordination", "meeseeks-box"], "created_at": "2026-01-28T21:21:37.660206+00:00", "updated_at": "2026-01-28T21:21:37.660206+00:00", "source": "session", "source_id": "19a449c7-bfa1-4882-825f-16bc3709efa0"}
{"id": "mm-cbca3b4b", "content": "The meeseeks-box workflow pattern for parent-child task coordination is: (1) spawn_agent() to create child, (2) wait_for_task() to block until child completes, (3) poll_messages() to retrieve child's completion report, (4) check task_tree_complete to determine if loop should continue.", "type": "pattern", "importance": 0.9, "tags": ["meeseeks-box", "workflow-pattern", "task-coordination"], "created_at": "2026-01-28T21:21:37.661274+00:00", "updated_at": "2026-01-28T21:21:37.661274+00:00", "source": "session", "source_id": "19a449c7-bfa1-4882-825f-16bc3709efa0"}
{"id": "mm-da5ac7f0", "content": "Gobby uses database migrations with a BASELINE_VERSION constant and numbered migration tuples. Migrations are stored in src/gobby/storage/migrations.py. The database schema version is tracked in a migrations table with timestamps. When the database version falls behind BASELINE_VERSION or available migrations, the application will error with 'Database version X is older than baseline Y'.", "type": "fact", "importance": 0.9, "tags": ["database", "migrations", "architecture"], "created_at": "2026-01-28T21:18:50.288890+00:00", "updated_at": "2026-01-28T21:18:50.288890+00:00", "source": "session", "source_id": "b9ce4431-a610-4889-a33d-877ba34aba2e"}
{"id": "mm-9b6b96b0", "content": "SkillSourceType is a Literal enum with values ['local', 'github', 'url', 'zip', 'filesystem']. When extending for hub support, add 'hub' as a new source type and track hub metadata via hub_id, hub_name, and hub_slug fields on the Skill dataclass.", "type": "fact", "importance": 0.9, "tags": ["skills", "hubs", "data-model"], "created_at": "2026-01-28T20:13:58.428482+00:00", "updated_at": "2026-01-28T20:13:58.428482+00:00", "source": "session", "source_id": "0c872236-ce01-4ecd-912b-6afdc5dd393f"}
{"id": "mm-466fccee", "content": "MemoryManager.get_related() must be async and requires await when calling CrossrefService.get_related(). The remember() method also needs to await create_crossrefs() calls to handle async operations correctly.", "type": "fact", "importance": 0.9, "tags": ["memory", "async", "gobby-core", "critical-fix"], "created_at": "2026-01-28T16:47:06.176928+00:00", "updated_at": "2026-01-28T16:47:06.176928+00:00", "source": "session", "source_id": "3b010b4a-a71b-40be-871a-624cec1dc2a8"}
{"id": "mm-9f97e77d", "content": "Critical tool/command name mismatches in gobby: memory tool 'remember' should be 'create_memory', memory CLI 'add' should be 'create', task sync flag changed from --direction to --import/--export. These affect both documentation and user workflows.", "type": "fact", "importance": 0.9, "tags": ["gobby", "tools", "naming", "api-changes"], "created_at": "2026-01-28T16:21:49.020668+00:00", "updated_at": "2026-01-28T16:21:49.020668+00:00", "source": "session", "source_id": "1cd214d0-1e0d-4983-a94a-93a041119ba5"}
{"id": "mm-350bd29b", "content": "The gobby project uses a task system that requires commits to be linked when closing tasks. Tasks must be closed with close_task() before the session can stop, and the commit SHA should be provided when closing.", "type": "fact", "importance": 0.9, "tags": ["task_system", "workflow", "commits"], "created_at": "2026-01-28T16:09:54.860403+00:00", "updated_at": "2026-01-28T16:09:54.860403+00:00", "source": "session", "source_id": "e33e8d96-853e-4a5e-98f3-b561d1bad449"}
{"id": "mm-c20c7e53", "content": "The gobby project uses a modular enforcement system in src/gobby/workflows/enforcement/ with separate modules for blocking.py, commit_policy.py, task_policy.py, and handlers.py. The __init__.py exports all functions for clean external imports. This replaced a 1,573-line facade file (task_enforcement_actions.py) that was removed during refactoring.", "type": "fact", "importance": 0.9, "tags": ["architecture", "enforcement", "module-structure", "refactoring"], "created_at": "2026-01-28T03:41:15.170721+00:00", "updated_at": "2026-01-28T03:41:15.170721+00:00", "source": "session", "source_id": "a4edf892-add1-4cad-95e0-aea0bb4459cb"}
{"id": "mm-2f427aa5", "content": "When decomposing modules into packages, gobby follows a pattern: create package with __init__.py, extract concerns into focused modules with underscore prefixes (_handoff.py, _messages.py, etc.), create _factory.py for object construction, update registries.py and test imports, then delete the original monolithic file.", "type": "pattern", "importance": 0.9, "tags": ["refactoring", "package-structure", "module-organization"], "created_at": "2026-01-28T01:59:09.437089+00:00", "updated_at": "2026-01-28T01:59:09.437089+00:00", "source": "session", "source_id": "d6068bb9-78b2-4941-9de3-e4e4fe940a4f"}
