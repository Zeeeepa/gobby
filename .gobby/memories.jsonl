{"id": "mm-f00646a4", "content": "Gobby uses Pydantic BaseModel for config classes (e.g., SkillsConfig in config/skills.py) and dataclasses for storage models (e.g., Skill in storage/skills.py with source_type, source_path, source_ref fields). Provider abstractions follow ABC pattern with @abstractmethod decorators, matching the LLMProvider style in llm/base.py.", "type": "pattern", "importance": 0.95, "tags": ["architecture", "config", "providers", "models"], "created_at": "2026-02-01T02:12:36.722552+00:00", "updated_at": "2026-02-01T02:12:36.722552+00:00", "source": "session", "source_id": "0c872236-ce01-4ecd-912b-6afdc5dd393f"}
{"id": "mm-6138c752", "content": "The gobby project uses a two-tier workflow architecture: meeseeks-box.yaml (parent) spawns child agents using gobby-agents.spawn_agent, while meeseeks.yaml (child) runs ON spawned agents with a specific lifecycle: get_session → claim_task → search_memory → search_context → save_findings → work → summarize → report_to_parent → shutdown.", "type": "fact", "importance": 0.95, "tags": ["workflow-architecture", "meeseeks", "agent-spawning"], "created_at": "2026-01-28T20:38:12.074109+00:00", "updated_at": "2026-01-28T20:38:12.074109+00:00", "source": "session", "source_id": "8cc46e99-2e03-41f8-ba7e-7ad372450e56"}
{"id": "mm-345741a5", "content": "The gobby project has significant documentation drift: mcp-tools.md documents only ~20-30% of actual tools (9 entire categories missing), cli-commands.md is missing 13+ command groups, tasks.md documents non-existent tools (expand_task, apply_tdd, analyze_complexity), and memory.md has incorrect tool names (remember→create_memory, add→create). Accuracy fixes should be prioritized before creating new documentation.", "type": "context", "importance": 0.95, "tags": ["documentation", "gobby", "accuracy-issues", "priority"], "created_at": "2026-01-28T16:21:49.019112+00:00", "updated_at": "2026-01-28T16:21:49.019112+00:00", "source": "session", "source_id": "1cd214d0-1e0d-4983-a94a-93a041119ba5"}
{"id": "mm-19db3616", "content": "The gobby project uses a 'Strangler Fig' refactoring pattern to decompose monolithic modules into smaller, focused components. Phase 1 decomposes session_messages.py into a sessions/ package with specialized modules (_handoff.py, _messages.py, _crud.py, _commits.py, _factory.py). Phase 2 refactors MemoryManager into component classes (SearchCoordinator, MultimodalIngestor, CrossrefService). Phase 3 extracts task_enforcement_actions.py into an enforcement/ package with blocking.py, commit_policy.py, task_policy.py.", "type": "fact", "importance": 0.95, "tags": ["architecture", "refactoring", "decomposition", "strangler-fig"], "created_at": "2026-01-28T02:00:14.079188+00:00", "updated_at": "2026-01-28T02:00:14.079188+00:00", "source": "session", "source_id": "d6068bb9-78b2-4941-9de3-e4e4fe940a4f"}
{"id": "mm-a1360b29", "content": "Gobby project uses strangler-fig decomposition pattern to refactor large modules. Current targets: actions.py (<400 lines, 49 wrappers remain), tools.py (<100 lines), codex.py (<200 lines), migrations.py (flatten with legacy). Implementation follows /gobby plan skill with Root epic → Phase epics → Feature tasks hierarchy.", "type": "context", "importance": 0.95, "tags": ["gobby", "refactoring", "architecture", "strangler-fig"], "created_at": "2026-01-26T23:05:30.973935+00:00", "updated_at": "2026-01-26T23:05:30.973935+00:00", "source": "session", "source_id": "c939a49c-67ad-433f-bc8f-defdac852772"}
{"id": "mm-297890e5", "content": "Plan files in `.gobby/plans/` must follow expand-ready format: tasks need explicit `(category: code|config|test|docs|refactor|research|planning|manual)` annotations, `(depends: TaskName)` or `(depends: Phase N)` dependency notation, and a Task Mapping table at the bottom for task references. The `/g expand` command uses this format to auto-generate TDD triplets for code/config tasks.", "type": "pattern", "importance": 0.95, "tags": ["gobby", "plan-format", "expand-command", "task-structure"], "created_at": "2026-01-26T22:45:44.275120+00:00", "updated_at": "2026-01-26T22:45:44.275120+00:00", "source": "session", "source_id": "1b365507-fea8-4662-a6c5-62caef8f48ea"}
{"id": "mm-3ae04725", "content": "Gobby's spawn architecture uses three spawner types (TerminalSpawner, EmbeddedSpawner, HeadlessSpawner) from spawn.py. Agent isolation is handled by WorktreeGitManager and CloneGitManager, with ~350 lines of duplicated spawn logic in spawn_agent_in_worktree and ~300 lines in spawn_agent_in_clone that should be unified.", "type": "fact", "importance": 0.95, "tags": ["architecture", "spawn-system", "git-isolation", "refactoring-target"], "created_at": "2026-01-26T17:18:24.807194+00:00", "updated_at": "2026-01-26T17:18:24.807194+00:00", "source": "session", "source_id": "8d582fd9-8c4b-48bf-949b-3d2f353527c9"}
{"id": "mm-5a96d183", "content": "Gobby project uses a unified installer that copies CLI-specific commands via install_cli_content(). Each CLI has its own directory: Claude uses Markdown in src/gobby/install/claude/commands/ → .claude/commands/, Gemini uses TOML in src/gobby/install/gemini/commands/ → .gemini/commands/, and Codex uses Markdown in src/gobby/install/codex/prompts/ → .codex/prompts/.", "type": "fact", "importance": 0.95, "tags": ["architecture", "installer", "multi-cli", "file-paths"], "created_at": "2026-01-26T15:19:56.014629+00:00", "updated_at": "2026-01-26T15:19:56.014629+00:00", "source": "session", "source_id": "1f0eb083-9ebd-4c61-8ea3-0e9fd78037e2"}
{"id": "mm-1398a1ab", "content": "The gobby project uses a unified spawn_agent API design with these key parameters: prompt (required), agent='generic' (default), isolation='current'|'worktree'|'clone'. Anonymous spawning defaults to 'generic' agent which uses bundled generic-agent.yaml and generic-workflow.yaml templates.", "type": "fact", "importance": 0.95, "tags": ["spawn_agent", "API_design", "gobby", "agent_spawning"], "created_at": "2026-01-26T14:05:26.282092+00:00", "updated_at": "2026-01-26T14:05:26.282092+00:00", "source": "session", "source_id": "dc91e716-6e3a-4958-a18f-599e9bc18341"}
{"id": "mm-a3743a20", "content": "The gobby project uses a multi-CLI installation model with four supported CLIs: Claude, Gemini, Codex, and Antigravity. Workflow files must be maintained in three locations: source shared version (src/gobby/install/shared/workflows/), installed versions for each CLI (.claude/, .gemini/, .codex/, .antigravity/), and project-level versions (.gobby/workflows/).", "type": "fact", "importance": 0.95, "tags": ["architecture", "file-organization", "installation", "multi-cli"], "created_at": "2026-01-26T02:57:07.741841+00:00", "updated_at": "2026-01-26T02:57:07.741841+00:00", "source": "session", "source_id": "1d0c2cb9-eb49-4dc2-8480-b01ade18895e"}
{"id": "mm-052d36a2", "content": "In gobby's logging configuration, setup_file_logging() sets propagate=False on the gobby package logger to prevent duplicate logs. This breaks pytest's caplog fixture because caplog captures via root logger handlers and depends on propagation. Tests need either a fixture enabling propagate=True during test execution, or should avoid using caplog.at_level(logger='gobby.utils.git') in favor of capturing all logs.", "type": "context", "importance": 0.95, "tags": ["logging", "testing", "caplog", "pytest", "gobby-logger-config"], "created_at": "2026-01-25T20:04:09.517652+00:00", "updated_at": "2026-01-25T20:04:09.517652+00:00", "source": "session", "source_id": "4042c9be-18da-4d31-9039-027a93af8c78"}
{"id": "mm-3dc68d19", "content": "The gobby project is transitioning workflows from global (~/.gobby/workflows/) to project-only (.gobby/workflows/) storage. This requires removing global_dirs defaults from WorkflowLoader, eliminating --global flags from CLI, and removing is_global parameters from MCP tools across: loader.py, hook_manager.py, cli/workflows.py, mcp_proxy/tools/workflows.py, and cli/installers/codex.py.", "type": "context", "importance": 0.95, "tags": ["workflows", "architecture-change", "refactoring-scope"], "created_at": "2026-01-25T18:55:39.262251+00:00", "updated_at": "2026-01-25T18:55:39.262251+00:00", "source": "session", "source_id": "598eabaa-1caa-40d8-8166-309b8ff8ba9c"}
{"id": "mm-86377881", "content": "gobby-skills is the single source of truth for bundled skills. It contains 24 skills total: 17 original gobby-* skills (gobby-agents, gobby-clones, gobby-diagnostic, gobby-expand, gobby-mcp, gobby-memory, gobby-merge, gobby-metrics, gobby-plan, gobby-sessions, gobby-tasks, gobby-workflows, gobby-worktrees) + 5 helper skills (claiming-tasks, committing-changes, discovering-tools, starting-sessions) + 7 quick task skills (bug, chore, epic, eval, feat, nit, ref). Duplicate skill directories in .claude/skills/gobby-* and .claude/commands/gobby/ should be deleted to maintain single source of truth.", "type": "fact", "importance": 0.95, "tags": ["gobby-skills", "architecture", "skill-organization"], "created_at": "2026-01-25T18:18:01.196567+00:00", "updated_at": "2026-01-25T18:18:01.196567+00:00", "source": "session", "source_id": "8ba09a43-3c3f-442c-9cdf-555cb2f38851"}
{"id": "mm-3860c4e5", "content": "Claude Code doesn't include tool_result in post-tool-use hooks, causing detection_helpers.py to receive empty tool_output dicts. This breaks error detection in detect_task_claim for close_task validation - when close_task fails validation (e.g., 'no_commits_linked'), the empty tool_output passes all error checks and incorrectly clears task_claimed=False.", "type": "fact", "importance": 0.95, "tags": ["claude-code-limitation", "detection_helpers", "close_task", "task_claimed", "bug-root-cause"], "created_at": "2026-01-25T17:15:06.972227+00:00", "updated_at": "2026-01-25T17:15:06.972227+00:00", "source": "session", "source_id": "b08118fe-cfa2-4c04-b92a-d381c05e7eda"}
{"id": "mm-a9c13ab0", "content": "Gobby requires explicit task claiming before file edits are permitted. Use create_task with claim: true parameter or claim_task tool to enable write access. The hook system enforces this via PreToolUse validation.", "type": "pattern", "importance": 0.95, "tags": ["task-management", "workflow", "write-access", "hooks"], "created_at": "2026-01-25T17:02:58.234367+00:00", "updated_at": "2026-01-25T17:02:58.234367+00:00", "source": "session", "source_id": "510d507d-f02a-47d5-8b8c-5c8fc2299ab3"}
{"id": "mm-c13c3c81", "content": "Gobby's UX strategy centers on simplifying workflow actions through omnibus tools. The `inject_context` action consolidates multiple context sources (skills, skill_suggestion, memories) into a single activation pattern, reducing cognitive load for users.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "architecture", "UX", "omnibus-tools"], "created_at": "2026-02-01T00:58:05.040044+00:00", "updated_at": "2026-02-01T00:58:05.040044+00:00", "source": "session", "source_id": "70cd9d8b-3583-4667-8b34-ea439a6c59ff"}
{"id": "mm-a77ed1f7", "content": "The gobby project uses MCP tools for task management. When closing tasks/epics, a 'reason' parameter is required - omitting it causes a PreToolUse hook error. Always include this parameter when closing items.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "MCP", "task-management", "error-prevention"], "created_at": "2026-02-01T00:05:27.778072+00:00", "updated_at": "2026-02-01T00:05:27.778072+00:00", "source": "session", "source_id": "2546c212-b834-47e9-850a-259017604696"}
{"id": "mm-069e6f79", "content": "The gobby project uses a pre-tool hook system (hook_dispatcher.py) that validates commits before task closure. The close_task tool requires a commit_sha parameter and will fail if there are uncommitted changes or hook validation errors.", "type": "fact", "importance": 0.9, "tags": ["gobby", "workflow", "git", "hooks", "task-closure"], "created_at": "2026-01-30T16:29:54.065567+00:00", "updated_at": "2026-01-30T16:29:54.065567+00:00", "source": "session", "source_id": "04bda0d5-3cf3-4466-b393-dbb62e727e8b"}
{"id": "mm-020dc1d4", "content": "Task closure in gobby's MCP system requires using parameter name 'reason' (not 'comment' or other variants) when closing tasks. Parameter validation is strict and will reject unknown parameters.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "mcp", "task-management", "api-parameters"], "created_at": "2026-01-30T05:36:12.763514+00:00", "updated_at": "2026-01-30T05:36:12.763514+00:00", "source": "session", "source_id": "abdf6562-8f03-4060-9691-0dc9911b674b"}
{"id": "mm-549f87a4", "content": "The Claude Agent SDK requires the Claude CLI to be installed separately. The SDK implementation should handle API key configuration with a fallback strategy: use ANTHROPIC_API_KEY if provided, otherwise use LiteLLM as the provider.", "type": "fact", "importance": 0.9, "tags": ["claude-agent-sdk", "dependencies", "api-configuration", "gobby"], "created_at": "2026-01-30T05:04:49.410967+00:00", "updated_at": "2026-01-30T05:04:49.410967+00:00", "source": "session", "source_id": "c4057c01-26f2-4c9f-bb02-7a23a7ce74dc"}
{"id": "mm-2ad2a720", "content": "SkillPort stores alwaysApply and injection_format metadata in nested metadata fields rather than as top-level database columns. Gobby's import strategy should extract these from SkillPort's metadata structure and decide whether to promote them to proper database columns.", "type": "fact", "importance": 0.9, "tags": ["gobby", "skillport", "database-schema", "metadata", "import-strategy"], "created_at": "2026-01-30T04:54:39.993922+00:00", "updated_at": "2026-01-30T04:54:39.993922+00:00", "source": "session", "source_id": "7786b710-a431-44cc-aba7-bff0ec576229"}
{"id": "mm-9a22b546", "content": "The project has a pre-commit verification process (`Gobby pre-commit verification`) that runs linting checks. All code changes must pass linting before commits are accepted, and unused imports (e.g., F401 violations from ruff) will cause verification failures.", "type": "fact", "importance": 0.9, "tags": ["gobby", "linting", "pre-commit", "verification", "ruff"], "created_at": "2026-01-30T04:36:22.756820+00:00", "updated_at": "2026-01-30T04:36:22.756820+00:00", "source": "session", "source_id": "576ddb2b-5717-412d-bfaa-4a118cf3668e"}
{"id": "mm-69e75435", "content": "There are 155 memories in the database with NULL project_id values that need to be updated to use the project_id from their associated source/session. This is a data integrity issue that requires migration.", "type": "context", "importance": 0.9, "tags": ["gobby", "data-integrity", "migration", "project_id"], "created_at": "2026-01-30T01:28:01.609017+00:00", "updated_at": "2026-01-30T01:28:01.609017+00:00", "source": "session", "source_id": "daf9fa89-b207-4674-acb3-f6c28bebb609"}
{"id": "mm-324dd652", "content": "The gobby project has dead code: `read_prompt_from_env()` function and environment variables `GOBBY_PROMPT` and `GOBBY_SYSTEM_PROMPT` are defined but only called in a test file (tests/integration/test_terminal_mode_worktrees.py), not used in actual agent spawning logic. These should be removed as part of decoupling agent spawning from environment variable dependencies.", "type": "fact", "importance": 0.9, "tags": ["gobby", "dead-code", "env-vars", "cleanup", "agent-spawning"], "created_at": "2026-01-29T23:49:24.402457+00:00", "updated_at": "2026-01-29T23:49:24.402457+00:00", "source": "session", "source_id": "bac9e680-2612-49f0-809c-a1d79f478dfe"}
{"id": "mm-39e12051", "content": "The gobby project uses a hook system located at .claude/hooks/hook_dispatcher.py that runs pre-tool and stop hooks. The .gobby/ directory should be excluded from CI/CD and pre-commit triggers to prevent hook feedback loops.", "type": "fact", "importance": 0.9, "tags": ["project-structure", "hooks", "gobby-directory", "ci-cd"], "created_at": "2026-01-29T23:21:22.633822+00:00", "updated_at": "2026-01-29T23:21:22.633822+00:00", "source": "session", "source_id": "0d0a35d4-a860-4acd-83a3-4625dac1a658"}
{"id": "mm-8069f195", "content": "The gobby project has 9,218 tests missing pytest markers and 766 fixtures missing type hints. User chose to fix both issues comprehensively rather than scope them partially.", "type": "context", "importance": 0.9, "tags": ["gobby", "testing", "markers", "type-hints", "scope"], "created_at": "2026-01-29T21:55:43.653175+00:00", "updated_at": "2026-01-29T21:55:43.653175+00:00", "source": "session", "source_id": "df3424d0-eb12-487c-9660-a57c1cfdd398"}
{"id": "mm-05096ffa", "content": "The gobby project is standardizing session_id format to 'Accept #N' across the codebase. This involves updating tool definitions, implementation code, and documentation—32 tools were identified that need updates as part of this standardization effort.", "type": "context", "importance": 0.9, "tags": ["gobby", "session_id-standardization", "ongoing-work"], "created_at": "2026-01-29T17:41:53.873807+00:00", "updated_at": "2026-01-29T17:41:53.873807+00:00", "source": "session", "source_id": "a506fc5b-8ab1-46b2-a51d-70c731443a33"}
{"id": "mm-7cbf9dcc", "content": "The gobby project uses a task-based workflow where changes must be claimed via task IDs before committing. Task claims are made through an MCP tool, and commits should reference the task number in the message format '[#TASKID]'.", "type": "pattern", "importance": 0.9, "tags": ["workflow", "git", "task-management"], "created_at": "2026-01-29T15:07:39.961827+00:00", "updated_at": "2026-01-29T15:07:39.961827+00:00", "source": "session", "source_id": "e8e5ef51-6442-48e1-9e5a-c95723d12bc1"}
{"id": "mm-1f5bd188", "content": "Task workflow in gobby requires creating/claiming a task before making changes, then committing changes with the task ID in the commit message (format: [#TASK_ID]), and finally marking the task complete via MCP tool.", "type": "pattern", "importance": 0.9, "tags": ["workflow", "git", "task-management"], "created_at": "2026-01-29T03:54:53.309229+00:00", "updated_at": "2026-01-29T03:54:53.309229+00:00", "source": "session", "source_id": "a8a64d5c-0dcf-4d6e-ae47-45eda0c13d26"}
{"id": "mm-2475e827", "content": "Task workflow requires explicit closure: when a task is in_progress, the stop hook will fail with a message directing to close_task before the session can complete. Git commits should reference task IDs in the format '[#XXXX]'.", "type": "pattern", "importance": 0.9, "tags": ["task-management", "workflow", "git-conventions"], "created_at": "2026-01-29T03:40:03.793250+00:00", "updated_at": "2026-01-29T03:40:03.793250+00:00", "source": "session", "source_id": "ba79f495-984c-4cc8-92be-6c352b431d15"}
{"id": "mm-209ff223", "content": "In the gobby project, when launching a gemini CLI instance in ghostty, the session_id and external_id are automatically available to the instance without needing to be passed as parameters. Avoid over-complicating the spawn flow by passing these values explicitly.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "gemini-cli", "ghostty", "architecture", "spawn-flow"], "created_at": "2026-01-29T03:07:39.922865+00:00", "updated_at": "2026-01-29T03:07:39.922865+00:00", "source": "session", "source_id": "832f7376-6505-444d-bb24-f5d60d15b922"}
{"id": "mm-9e7df56a", "content": "The gobby project uses a plugin system (HookPlugin) with hook handlers for BEFORE_TOOL and AFTER_TOOL events. Plugins register workflow actions and conditions, and can enforce code quality checks (ruff, mypy) with auto-fix capabilities.", "type": "fact", "importance": 0.9, "tags": ["gobby", "architecture", "plugins", "hooks"], "created_at": "2026-01-29T02:47:50.778081+00:00", "updated_at": "2026-01-29T02:47:50.778081+00:00", "source": "session", "source_id": "0955b7ef-8dd8-487b-bf7d-27a707d8789d"}
{"id": "mm-24bc6cd1", "content": "Gobby project uses a daemon architecture with skill management. Skills are stored in ~/.claude/skills/ directory with SKILL.md files. The daemon needs to be restarted after deleting stale skill references to trigger re-syncing from the authoritative source at src/gobby/install/shared/skills/.", "type": "fact", "importance": 0.9, "tags": ["gobby", "architecture", "daemon", "skills", "file-structure"], "created_at": "2026-01-28T21:50:57.361042+00:00", "updated_at": "2026-01-28T21:50:57.361042+00:00", "source": "session", "source_id": "bf024d3e-66a5-4af6-a500-ac36456674a3"}
{"id": "mm-37cf3f95", "content": "The meeseeks-box workflow pattern for parent-child task coordination is: (1) spawn_agent() to create child, (2) wait_for_task() to block until child completes, (3) poll_messages() to retrieve child's completion report, (4) check task_tree_complete to determine if loop should continue.", "type": "pattern", "importance": 0.9, "tags": ["meeseeks-box", "workflow-pattern", "task-coordination"], "created_at": "2026-01-28T21:42:57.062472+00:00", "updated_at": "2026-01-28T21:42:57.062472+00:00", "source": "session", "source_id": "19a449c7-bfa1-4882-825f-16bc3709efa0"}
{"id": "mm-1bc61281", "content": "The gobby task system provides `wait_for_task(task_id, timeout=600, poll_interval=5.0)` tool that blocks a parent agent until a child task reaches 'closed' status. This tool handles internal polling at the specified interval, eliminating the need for manual polling loops in the meeseeks-box workflow pattern.", "type": "fact", "importance": 0.9, "tags": ["gobby-tasks", "wait_for_task", "task-coordination", "meeseeks-box"], "created_at": "2026-01-28T21:21:37.660206+00:00", "updated_at": "2026-01-28T21:21:37.660206+00:00", "source": "session", "source_id": "19a449c7-bfa1-4882-825f-16bc3709efa0"}
{"id": "mm-45736537", "content": "Gobby uses database migrations with a BASELINE_VERSION constant and numbered migration tuples. Migrations are stored in src/gobby/storage/migrations.py. The database schema version is tracked in a migrations table with timestamps. When the database version falls behind BASELINE_VERSION or available migrations, the application will error with 'Database version X is older than baseline Y'.", "type": "fact", "importance": 0.9, "tags": ["database", "migrations", "architecture"], "created_at": "2026-01-28T21:18:58.458643+00:00", "updated_at": "2026-01-28T21:18:58.458643+00:00", "source": "session", "source_id": "b9ce4431-a610-4889-a33d-877ba34aba2e"}
{"id": "mm-9b6b96b0", "content": "SkillSourceType is a Literal enum with values ['local', 'github', 'url', 'zip', 'filesystem']. When extending for hub support, add 'hub' as a new source type and track hub metadata via hub_id, hub_name, and hub_slug fields on the Skill dataclass.", "type": "fact", "importance": 0.9, "tags": ["skills", "hubs", "data-model"], "created_at": "2026-01-28T20:13:58.428482+00:00", "updated_at": "2026-01-28T20:13:58.428482+00:00", "source": "session", "source_id": "0c872236-ce01-4ecd-912b-6afdc5dd393f"}
{"id": "mm-466fccee", "content": "MemoryManager.get_related() must be async and requires await when calling CrossrefService.get_related(). The remember() method also needs to await create_crossrefs() calls to handle async operations correctly.", "type": "fact", "importance": 0.9, "tags": ["memory", "async", "gobby-core", "critical-fix"], "created_at": "2026-01-28T16:47:06.176928+00:00", "updated_at": "2026-01-28T16:47:06.176928+00:00", "source": "session", "source_id": "3b010b4a-a71b-40be-871a-624cec1dc2a8"}
{"id": "mm-028cabf8", "content": "Critical tool/command name mismatches in gobby: memory tool 'remember' should be 'create_memory', memory CLI 'add' should be 'create', task sync flag changed from --direction to --import/--export. These affect both documentation and user workflows.", "type": "fact", "importance": 0.9, "tags": ["gobby", "tools", "naming", "api-changes"], "created_at": "2026-01-28T16:22:28.211840+00:00", "updated_at": "2026-01-28T16:22:28.211840+00:00", "source": "session", "source_id": "1cd214d0-1e0d-4983-a94a-93a041119ba5"}
{"id": "mm-350bd29b", "content": "The gobby project uses a task system that requires commits to be linked when closing tasks. Tasks must be closed with close_task() before the session can stop, and the commit SHA should be provided when closing.", "type": "fact", "importance": 0.9, "tags": ["task_system", "workflow", "commits"], "created_at": "2026-01-28T16:09:54.860403+00:00", "updated_at": "2026-01-28T16:09:54.860403+00:00", "source": "session", "source_id": "e33e8d96-853e-4a5e-98f3-b561d1bad449"}
{"id": "mm-43d90f86", "content": "The gobby project uses a modular enforcement system in src/gobby/workflows/enforcement/ with separate modules for blocking.py, commit_policy.py, task_policy.py, and handlers.py. The __init__.py exports all functions for clean external imports. This replaced a 1,573-line facade file (task_enforcement_actions.py) that was removed during refactoring.", "type": "fact", "importance": 0.9, "tags": ["architecture", "enforcement", "module-structure", "refactoring"], "created_at": "2026-01-28T03:42:09.792428+00:00", "updated_at": "2026-01-28T03:42:09.792428+00:00", "source": "session", "source_id": "a4edf892-add1-4cad-95e0-aea0bb4459cb"}
{"id": "mm-2f427aa5", "content": "When decomposing modules into packages, gobby follows a pattern: create package with __init__.py, extract concerns into focused modules with underscore prefixes (_handoff.py, _messages.py, etc.), create _factory.py for object construction, update registries.py and test imports, then delete the original monolithic file.", "type": "pattern", "importance": 0.9, "tags": ["refactoring", "package-structure", "module-organization"], "created_at": "2026-01-28T01:59:09.437089+00:00", "updated_at": "2026-01-28T01:59:09.437089+00:00", "source": "session", "source_id": "d6068bb9-78b2-4941-9de3-e4e4fe940a4f"}
{"id": "mm-534698e2", "content": "gobby session references use #N notation (e.g., #6294) that require project_id resolution via get_project_context() in session_messages.py for get_session and get_handoff_context tools.", "type": "fact", "importance": 0.9, "tags": ["session-messages.py", "project-context", "API-patterns"], "created_at": "2026-01-27T23:41:42.513704+00:00", "updated_at": "2026-01-27T23:41:42.513704+00:00", "source": "session", "source_id": "39a10997-65a2-4b26-a7ba-fe39b764ea3d"}
{"id": "mm-1fa2a84f", "content": "Deprecated tools to remove: `start_agent` and `spawn_agent_in_clone`. Tests should use the unified `spawn_agent` tool instead. The old test file `tests/integration/test_start_agent_tool.py` is obsolete.", "type": "context", "importance": 0.9, "tags": ["api-deprecation", "spawn_agent", "testing"], "created_at": "2026-01-27T23:38:12.463391+00:00", "updated_at": "2026-01-27T23:38:12.463391+00:00", "source": "session", "source_id": "5d29ae81-e961-4da4-af8a-20467e7e654e"}
{"id": "mm-23e5ed66", "content": "Gobby project uses a custom hook system with hook_dispatcher.py that enforces task lifecycle management. Tasks must be explicitly closed with close_task() before the stop hook will succeed, and attempting to stop with in_progress tasks will fail.", "type": "fact", "importance": 0.9, "tags": ["gobby", "hooks", "task-management", "workflow"], "created_at": "2026-01-27T22:58:27.313276+00:00", "updated_at": "2026-01-27T22:58:27.313276+00:00", "source": "session", "source_id": "4e1df24d-0242-427d-a7cf-36d77a4de313"}
{"id": "mm-4d2805d8", "content": "Gobby uses a strangler fig pattern for safe migrations: BASELINE_SCHEMA_V2 at v75 is the new flattened baseline for fresh installs, controlled by use_flattened_baseline feature flag (defaulting to True). Pre-v75 databases use legacy migrations from migrations_legacy.py. When current_version < BASELINE_VERSION and legacy migrations unavailable, should raise exception instead of silently returning 0.", "type": "fact", "importance": 0.9, "tags": ["migration", "database", "strangler-fig", "baseline"], "created_at": "2026-01-27T22:53:22.007540+00:00", "updated_at": "2026-01-27T22:53:22.007540+00:00", "source": "session", "source_id": "935114fe-ccaa-4dfc-8f95-99956c976c4f"}
{"id": "mm-02e9f062", "content": "The gobby project has a task system that requires commits to be linked before tasks can be closed. Task closure is enforced by a stop hook that prevents session termination until in_progress tasks are resolved.", "type": "fact", "importance": 0.9, "tags": ["workflow", "task-management", "git"], "created_at": "2026-01-27T19:10:01.153000+00:00", "updated_at": "2026-01-27T19:10:01.153000+00:00", "source": "session", "source_id": "3caecb5d-d60f-4db8-a133-af7d943ec216"}
{"id": "mm-260c031c", "content": "The gobby project recently underwent a config module reorganization where exports were cleaned up. Test files now need imports updated to the new module locations: LLMProviderConfig and LLMProvidersConfig from gobby.config.llm_providers, SessionSummaryConfig and TitleSynthesisConfig from gobby.config.sessions, WebSocketBroadcastConfig and HookExtensionsConfig from gobby.config.extensions.", "type": "fact", "importance": 0.9, "tags": ["imports", "config-reorganization", "test-fixes"], "created_at": "2026-01-27T18:44:07.564618+00:00", "updated_at": "2026-01-27T18:44:07.564618+00:00", "source": "session", "source_id": "92ef8efc-a5d6-4b8c-b235-59c8c08b0a8b"}
{"id": "mm-1760942f", "content": "config/app.py re-exports 31 symbols from 10 extracted modules. 95% of import traffic comes from just 2 symbols (DaemonConfig and load_config), with 10+ symbols having zero importers. DaemonConfig and load_config are genuinely app-level and should stay; unused re-exports can be removed with updates to ~12 files.", "type": "fact", "importance": 0.9, "tags": ["gobby", "config", "refactoring", "import-analysis"], "created_at": "2026-01-27T18:16:41.567852+00:00", "updated_at": "2026-01-27T18:16:41.567852+00:00", "source": "session", "source_id": "a1199286-0860-4cd3-aeb8-366a288db4b4"}
{"id": "mm-2795b5b6", "content": "The doctor skill in gobby supports four flag-based modes: --functional (basic checks), --security (Phase 5 Security Audit), --all (both), and --cleanup. The Phase 5 Security Audit includes 8 checks: file permissions, plaintext secrets, HTTP binding, webhooks, debug logging, plugins, MCP URLs, and permissive skills.", "type": "fact", "importance": 0.9, "tags": ["gobby", "doctor-skill", "security-audit", "flags"], "created_at": "2026-01-27T17:51:58.896735+00:00", "updated_at": "2026-01-27T17:51:58.896735+00:00", "source": "session", "source_id": "448cabcd-183a-473e-a6ae-a6050b5c6d96"}
