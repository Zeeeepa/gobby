{"id": "mm-5a96d183", "content": "Gobby project uses a unified installer that copies CLI-specific commands via install_cli_content(). Each CLI has its own directory: Claude uses Markdown in src/gobby/install/claude/commands/ → .claude/commands/, Gemini uses TOML in src/gobby/install/gemini/commands/ → .gemini/commands/, and Codex uses Markdown in src/gobby/install/codex/prompts/ → .codex/prompts/.", "type": "fact", "importance": 0.95, "tags": ["architecture", "installer", "multi-cli", "file-paths"], "created_at": "2026-01-26T15:19:56.014629+00:00", "updated_at": "2026-01-26T15:19:56.014629+00:00", "source": "session", "source_id": "1f0eb083-9ebd-4c61-8ea3-0e9fd78037e2"}
{"id": "mm-1398a1ab", "content": "The gobby project uses a unified spawn_agent API design with these key parameters: prompt (required), agent='generic' (default), isolation='current'|'worktree'|'clone'. Anonymous spawning defaults to 'generic' agent which uses bundled generic-agent.yaml and generic-workflow.yaml templates.", "type": "fact", "importance": 0.95, "tags": ["spawn_agent", "API_design", "gobby", "agent_spawning"], "created_at": "2026-01-26T14:05:26.282092+00:00", "updated_at": "2026-01-26T14:05:26.282092+00:00", "source": "session", "source_id": "dc91e716-6e3a-4958-a18f-599e9bc18341"}
{"id": "mm-a3743a20", "content": "The gobby project uses a multi-CLI installation model with four supported CLIs: Claude, Gemini, Codex, and Antigravity. Workflow files must be maintained in three locations: source shared version (src/gobby/install/shared/workflows/), installed versions for each CLI (.claude/, .gemini/, .codex/, .antigravity/), and project-level versions (.gobby/workflows/).", "type": "fact", "importance": 0.95, "tags": ["architecture", "file-organization", "installation", "multi-cli"], "created_at": "2026-01-26T02:57:07.741841+00:00", "updated_at": "2026-01-26T02:57:07.741841+00:00", "source": "session", "source_id": "1d0c2cb9-eb49-4dc2-8480-b01ade18895e"}
{"id": "mm-052d36a2", "content": "In gobby's logging configuration, setup_file_logging() sets propagate=False on the gobby package logger to prevent duplicate logs. This breaks pytest's caplog fixture because caplog captures via root logger handlers and depends on propagation. Tests need either a fixture enabling propagate=True during test execution, or should avoid using caplog.at_level(logger='gobby.utils.git') in favor of capturing all logs.", "type": "context", "importance": 0.95, "tags": ["logging", "testing", "caplog", "pytest", "gobby-logger-config"], "created_at": "2026-01-25T20:04:09.517652+00:00", "updated_at": "2026-01-25T20:04:09.517652+00:00", "source": "session", "source_id": "4042c9be-18da-4d31-9039-027a93af8c78"}
{"id": "mm-3eb24810", "content": "The gobby project is transitioning workflows from global (~/.gobby/workflows/) to project-only (.gobby/workflows/) storage. This requires removing global_dirs defaults from WorkflowLoader, eliminating --global flags from CLI, and removing is_global parameters from MCP tools across: loader.py, hook_manager.py, cli/workflows.py, mcp_proxy/tools/workflows.py, and cli/installers/codex.py.", "type": "context", "importance": 0.95, "tags": ["workflows", "architecture-change", "refactoring-scope"], "created_at": "2026-01-25T18:46:30.280702+00:00", "updated_at": "2026-01-25T18:46:30.280702+00:00", "source": "session", "source_id": "598eabaa-1caa-40d8-8166-309b8ff8ba9c"}
{"id": "mm-86377881", "content": "gobby-skills is the single source of truth for bundled skills. It contains 24 skills total: 17 original gobby-* skills (gobby-agents, gobby-clones, gobby-diagnostic, gobby-expand, gobby-mcp, gobby-memory, gobby-merge, gobby-metrics, gobby-plan, gobby-sessions, gobby-tasks, gobby-workflows, gobby-worktrees) + 5 helper skills (claiming-tasks, committing-changes, discovering-tools, starting-sessions) + 7 quick task skills (bug, chore, epic, eval, feat, nit, ref). Duplicate skill directories in .claude/skills/gobby-* and .claude/commands/gobby/ should be deleted to maintain single source of truth.", "type": "fact", "importance": 0.95, "tags": ["gobby-skills", "architecture", "skill-organization"], "created_at": "2026-01-25T18:18:01.196567+00:00", "updated_at": "2026-01-25T18:18:01.196567+00:00", "source": "session", "source_id": "8ba09a43-3c3f-442c-9cdf-555cb2f38851"}
{"id": "mm-414c0ecb", "content": "Claude Code doesn't include tool_result in post-tool-use hooks, causing detection_helpers.py to receive empty tool_output dicts. This breaks error detection in detect_task_claim for close_task validation - when close_task fails validation (e.g., 'no_commits_linked'), the empty tool_output passes all error checks and incorrectly clears task_claimed=False.", "type": "fact", "importance": 0.95, "tags": ["claude-code-limitation", "detection_helpers", "close_task", "task_claimed", "bug-root-cause"], "created_at": "2026-01-25T17:14:28.198509+00:00", "updated_at": "2026-01-25T17:14:28.198509+00:00", "source": "session", "source_id": "b08118fe-cfa2-4c04-b92a-d381c05e7eda"}
{"id": "mm-a9c13ab0", "content": "Gobby requires explicit task claiming before file edits are permitted. Use create_task with claim: true parameter or claim_task tool to enable write access. The hook system enforces this via PreToolUse validation.", "type": "pattern", "importance": 0.95, "tags": ["task-management", "workflow", "write-access", "hooks"], "created_at": "2026-01-25T17:02:58.234367+00:00", "updated_at": "2026-01-25T17:02:58.234367+00:00", "source": "session", "source_id": "510d507d-f02a-47d5-8b8c-5c8fc2299ab3"}
{"id": "mm-81e2e3af", "content": "Task closure in gobby requires a linked commit before the close operation will succeed - attempting to close without commits returns 'no_commits_linked' error. Workflow: make changes → commit with [#N] format → close task with commit SHA.", "type": "context", "importance": 0.9, "tags": ["workflow", "task-closure", "git-integration"], "created_at": "2026-01-26T15:30:12.066053+00:00", "updated_at": "2026-01-26T15:30:12.066053+00:00", "source": "session", "source_id": "5ba0e7a1-f81a-495c-839e-d2710f7f3c64"}
{"id": "mm-1a9b788e", "content": "Gobby project uses task numbering format [#N] in commit messages (e.g., '[#6089] Add Skills display to CLI status output'). This format is required and referenced in task closure workflows.", "type": "pattern", "importance": 0.9, "tags": ["commit-convention", "gobby", "task-tracking"], "created_at": "2026-01-26T15:30:12.064613+00:00", "updated_at": "2026-01-26T15:30:12.064613+00:00", "source": "session", "source_id": "5ba0e7a1-f81a-495c-839e-d2710f7f3c64"}
{"id": "mm-de383393", "content": "HTTPServer in gobby doesn't have direct skill_manager or skills_manager attributes. Skills are accessed via the gobby-skills registry through server._internal_manager, which contains a storage instance (LocalSkillManager) with access to skill listing and metadata.", "type": "fact", "importance": 0.9, "tags": ["gobby", "HTTPServer", "skills", "architecture", "registry-access"], "created_at": "2026-01-26T15:25:05.983406+00:00", "updated_at": "2026-01-26T15:25:05.983406+00:00", "source": "session", "source_id": "abc2700e-a3b7-49e6-8af8-daaf3a0607cb"}
{"id": "mm-23fdda6d", "content": "Gobby skill routing uses a two-part pattern: /gobby routes to Gobby skills via search_skills() → get_skill(), while /gobby mcp <server> routes to MCP servers via list_tools() → call_tool(). /g is a shorthand alias with identical content.", "type": "pattern", "importance": 0.9, "tags": ["routing", "architecture", "slash-commands"], "created_at": "2026-01-26T15:19:56.015427+00:00", "updated_at": "2026-01-26T15:19:56.015427+00:00", "source": "session", "source_id": "1f0eb083-9ebd-4c61-8ea3-0e9fd78037e2"}
{"id": "mm-db636fa0", "content": "SkillChangeNotifier pattern: Wire change listeners to LocalSkillManager to automatically trigger search index updates on any skill mutation (create/update/delete), eliminating the need for manual re-indexing calls in individual MCP tool handlers.", "type": "pattern", "importance": 0.9, "tags": ["architecture", "skill-management", "search-indexing", "observer-pattern"], "created_at": "2026-01-26T15:14:41.965429+00:00", "updated_at": "2026-01-26T15:14:41.965429+00:00", "source": "session", "source_id": "e3289ba4-649b-4c70-bae6-4d4d88f9bb91"}
{"id": "mm-f0afc803", "content": "Gobby has 13 skills with `gobby-` prefix that should be renamed to remove the prefix for consistency. The skills are organized in `/commands/gobby/` directory and need individual renames plus SKILL.md updates.", "type": "fact", "importance": 0.9, "tags": ["gobby", "skills", "refactoring", "naming-convention"], "created_at": "2026-01-26T15:05:14.860933+00:00", "updated_at": "2026-01-26T15:05:14.860933+00:00", "source": "session", "source_id": "7a81fcd4-081e-46e1-816a-7c19660112ae"}
{"id": "mm-d8b0e7b6", "content": "Step workflows in gobby require explicit activation via activate_workflow() call before steps execute. The on_enter hook only runs after activation, not immediately when a child agent is spawned. Parent workflows (like meeseeks-box) must include activation instructions in the spawn prompt.", "type": "pattern", "importance": 0.9, "tags": ["workflows", "meeseeks", "lifecycle", "parent-child"], "created_at": "2026-01-26T14:25:01.562444+00:00", "updated_at": "2026-01-26T14:25:01.562444+00:00", "source": "session", "source_id": "4cb1f535-45d0-476c-92e1-5c11a06e1ef2"}
{"id": "mm-db949147", "content": "The gobby project uses a task ID resolution pattern via `resolve_task_id_for_mcp()` function that normalizes flexible task_id formats (N, #N, UUID) into standardized UUIDs. This function is located in the tasks._resolution module and should be used in MCP tool functions that accept task_id parameters.", "type": "pattern", "importance": 0.9, "tags": ["task-resolution", "mcp-tools", "task-id-formats"], "created_at": "2026-01-26T14:06:11.452382+00:00", "updated_at": "2026-01-26T14:06:11.452382+00:00", "source": "session", "source_id": "fd7660c1-b6a1-4b45-81ae-e8d0c7aa074c"}
{"id": "mm-5e4dec6c", "content": "Project-scoped features in Gobby (tasks, sessions, workflows, memory tools, semantic search) all require .gobby/project.json and fail with 'No project_id available' error when run without project context. These are core features that differentiate Gobby as an AI coding assistant.", "type": "fact", "importance": 0.9, "tags": ["gobby", "project-context", "core-features", "limitations"], "created_at": "2026-01-26T02:40:00.900594+00:00", "updated_at": "2026-01-26T02:40:00.900594+00:00", "source": "session", "source_id": "98f5698d-646d-409d-8d8f-c997ab736d98"}
{"id": "mm-b15389ba", "content": "The meeseeks pattern consists of two complementary workflows: meeseeks.yaml (child agent workflow with claim → work → report → shutdown cycle) and meeseeks-box.yaml (parent workflow that spawns meeseeks child agents). Both are foundational to the agent orchestration system.", "type": "fact", "importance": 0.9, "tags": ["workflows", "agent-pattern", "orchestration", "meeseeks"], "created_at": "2026-01-26T02:57:07.743615+00:00", "updated_at": "2026-01-26T02:57:07.743615+00:00", "source": "session", "source_id": "1d0c2cb9-eb49-4dc2-8480-b01ade18895e"}
{"id": "mm-750109bd", "content": "Gobby uses ~/.gobby/ directory for its database (gobby-hub.db), config (config.yaml), and other runtime files. When running different versions of gobby, they share this directory and database, which can cause schema compatibility issues. Use GOBBY_HOME environment variable to isolate different gobby instances if needed.", "type": "fact", "importance": 0.9, "tags": ["gobby", "database", "configuration", "environment"], "created_at": "2026-01-25T23:37:41.140190+00:00", "updated_at": "2026-01-25T23:37:41.140190+00:00", "source": "session", "source_id": "2ceaa340-cf01-4208-80b8-dcc482c3992c"}
{"id": "mm-c0578dfa", "content": "User preference for gobby: workflows should be project-scoped only, not stored globally. This architectural decision eliminates the need for fallback behavior to ~/.gobby/workflows/.", "type": "preference", "importance": 0.9, "tags": ["workflows", "user-requirement", "scope"], "created_at": "2026-01-25T18:46:30.283334+00:00", "updated_at": "2026-01-25T18:46:30.283334+00:00", "source": "session", "source_id": "598eabaa-1caa-40d8-8166-309b8ff8ba9c"}
{"id": "mm-8901320b", "content": "The gobby project uses a task-based workflow where agents must claim a task before modifying files. Tasks are created/claimed via mcp__gobby__call_tool, and must be closed with close_task() before the session stops, passing the commit SHA from git.", "type": "pattern", "importance": 0.9, "tags": ["task-workflow", "gobby-mcp", "commit-integration"], "created_at": "2026-01-25T18:38:30.159984+00:00", "updated_at": "2026-01-25T18:38:30.159984+00:00", "source": "session", "source_id": "8acbf4cc-c352-46e6-92f7-1047394972e3"}
{"id": "mm-95982e24", "content": "LocalTaskManager.get_task() in src/gobby/storage/tasks/_manager.py accepts multiple task ID formats (UUID, #N, N notation) and resolves them internally, but direct comparisons between task.id (UUID) and claimed_task_id values fail if claimed_task_id stores non-UUID formats.", "type": "fact", "importance": 0.9, "tags": ["gobby", "task-management", "id-formats", "bug-pattern"], "created_at": "2026-01-25T18:19:24.503354+00:00", "updated_at": "2026-01-25T18:19:24.503354+00:00", "source": "session", "source_id": "3fe55f9e-069d-470f-ab2f-03ceaf53a6b0"}
{"id": "mm-1a26cb0a", "content": "Task ID comparison bugs exist at _lifecycle.py:199 (claimed_task_id == resolved_id) and task_enforcement_actions.py:963 (t.id == claimed_task_id). These fail when claimed_task_id contains refs like '#6066' instead of UUIDs. Fix: ensure claimed_task_id always stores resolved UUIDs at storage time.", "type": "context", "importance": 0.9, "tags": ["gobby", "bug-location", "task-ids", "comparison"], "created_at": "2026-01-25T18:19:24.504439+00:00", "updated_at": "2026-01-25T18:19:24.504439+00:00", "source": "session", "source_id": "3fe55f9e-069d-470f-ab2f-03ceaf53a6b0"}
{"id": "mm-4365aaba", "content": "In detection_helpers.py, the post-tool-use hook must guard against empty `tool_output` when processing `close_task` calls, as Claude Code doesn't include `tool_result` in post-tool-use hooks, which can cause incorrect state clearing (task_claimed flag). The MCP proxy's close_task already handles state clearing for successful closes.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "detection_helpers.py", "state-management", "bug-prevention"], "created_at": "2026-01-25T17:17:47.890702+00:00", "updated_at": "2026-01-25T17:17:47.890702+00:00", "source": "session", "source_id": "10803605-e46c-4c09-8020-d6a4d5077a57"}
{"id": "mm-d7198491", "content": "Gobby has a skill bundling/syncing mechanism: `get_bundled_skills_path()` returns `src/gobby/install/shared/skills/` and `sync_bundled_skills()` loads all skills from that directory and creates them in the database if they don't exist. Skills must be in proper directory format (directory with SKILL.md).", "type": "fact", "importance": 0.9, "tags": ["gobby", "skills", "architecture", "bundling"], "created_at": "2026-01-25T17:40:17.813446+00:00", "updated_at": "2026-01-25T17:40:17.813446+00:00", "source": "session", "source_id": "a6b6cc75-b083-4183-827a-b05d51d5a1d3"}
{"id": "mm-8af0897e", "content": "In the gobby project's pytest test suite, caplog logging capture requires using `with caplog.at_level(logging.DEBUG, logger=\"module.name\"):` as a context manager around code that generates logs. Using `caplog.set_level()` in autouse fixtures does not properly capture logs and is a broken pattern.", "type": "pattern", "importance": 0.9, "tags": ["testing", "pytest", "caplog", "logging", "gobby"], "created_at": "2026-01-25T16:53:25.603590+00:00", "updated_at": "2026-01-25T16:53:25.603590+00:00", "source": "session", "source_id": "99afe6be-e662-4f5b-a6b0-6c8da124b366"}
