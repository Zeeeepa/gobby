{"id": "mm-6138c752", "content": "The gobby project uses a two-tier workflow architecture: meeseeks-box.yaml (parent) spawns child agents using gobby-agents.spawn_agent, while meeseeks.yaml (child) runs ON spawned agents with a specific lifecycle: get_session → claim_task → search_memory → search_context → save_findings → work → summarize → report_to_parent → shutdown.", "type": "fact", "importance": 0.95, "tags": ["workflow-architecture", "meeseeks", "agent-spawning"], "created_at": "2026-01-28T20:38:12.074109+00:00", "updated_at": "2026-01-28T20:38:12.074109+00:00", "source": "session", "source_id": "8cc46e99-2e03-41f8-ba7e-7ad372450e56"}
{"id": "mm-98648f97", "content": "Gobby uses Pydantic BaseModel for config classes (e.g., SkillsConfig in config/skills.py) and dataclasses for storage models (e.g., Skill in storage/skills.py with source_type, source_path, source_ref fields). Provider abstractions follow ABC pattern with @abstractmethod decorators, matching the LLMProvider style in llm/base.py.", "type": "pattern", "importance": 0.95, "tags": ["architecture", "config", "providers", "models"], "created_at": "2026-01-28T20:13:58.013845+00:00", "updated_at": "2026-01-28T20:13:58.013845+00:00", "source": "session", "source_id": "0c872236-ce01-4ecd-912b-6afdc5dd393f"}
{"id": "mm-345741a5", "content": "The gobby project has significant documentation drift: mcp-tools.md documents only ~20-30% of actual tools (9 entire categories missing), cli-commands.md is missing 13+ command groups, tasks.md documents non-existent tools (expand_task, apply_tdd, analyze_complexity), and memory.md has incorrect tool names (remember→create_memory, add→create). Accuracy fixes should be prioritized before creating new documentation.", "type": "context", "importance": 0.95, "tags": ["documentation", "gobby", "accuracy-issues", "priority"], "created_at": "2026-01-28T16:21:49.019112+00:00", "updated_at": "2026-01-28T16:21:49.019112+00:00", "source": "session", "source_id": "1cd214d0-1e0d-4983-a94a-93a041119ba5"}
{"id": "mm-39112358", "content": "The gobby project uses a 'Strangler Fig' refactoring pattern to decompose monolithic modules into smaller, focused components. Phase 1 decomposes session_messages.py into a sessions/ package with specialized modules (_handoff.py, _messages.py, _crud.py, _commits.py, _factory.py). Phase 2 refactors MemoryManager into component classes (SearchCoordinator, MultimodalIngestor, CrossrefService). Phase 3 extracts task_enforcement_actions.py into an enforcement/ package with blocking.py, commit_policy.py, task_policy.py.", "type": "fact", "importance": 0.95, "tags": ["architecture", "refactoring", "decomposition", "strangler-fig"], "created_at": "2026-01-28T01:59:09.435744+00:00", "updated_at": "2026-01-28T01:59:09.435744+00:00", "source": "session", "source_id": "d6068bb9-78b2-4941-9de3-e4e4fe940a4f"}
{"id": "mm-a1360b29", "content": "Gobby project uses strangler-fig decomposition pattern to refactor large modules. Current targets: actions.py (<400 lines, 49 wrappers remain), tools.py (<100 lines), codex.py (<200 lines), migrations.py (flatten with legacy). Implementation follows /gobby plan skill with Root epic → Phase epics → Feature tasks hierarchy.", "type": "context", "importance": 0.95, "tags": ["gobby", "refactoring", "architecture", "strangler-fig"], "created_at": "2026-01-26T23:05:30.973935+00:00", "updated_at": "2026-01-26T23:05:30.973935+00:00", "source": "session", "source_id": "c939a49c-67ad-433f-bc8f-defdac852772"}
{"id": "mm-fad146df", "content": "Plan files in `.gobby/plans/` must follow expand-ready format: tasks need explicit `(category: code|config|test|docs|refactor|research|planning|manual)` annotations, `(depends: TaskName)` or `(depends: Phase N)` dependency notation, and a Task Mapping table at the bottom for task references. The `/g expand` command uses this format to auto-generate TDD triplets for code/config tasks.", "type": "pattern", "importance": 0.95, "tags": ["gobby", "plan-format", "expand-command", "task-structure"], "created_at": "2026-01-26T22:18:20.049027+00:00", "updated_at": "2026-01-26T22:18:20.049027+00:00", "source": "session", "source_id": "1b365507-fea8-4662-a6c5-62caef8f48ea"}
{"id": "mm-ef920a2b", "content": "Gobby's spawn architecture uses three spawner types (TerminalSpawner, EmbeddedSpawner, HeadlessSpawner) from spawn.py. Agent isolation is handled by WorktreeGitManager and CloneGitManager, with ~350 lines of duplicated spawn logic in spawn_agent_in_worktree and ~300 lines in spawn_agent_in_clone that should be unified.", "type": "fact", "importance": 0.95, "tags": ["architecture", "spawn-system", "git-isolation", "refactoring-target"], "created_at": "2026-01-26T17:11:39.633055+00:00", "updated_at": "2026-01-26T17:11:39.633055+00:00", "source": "session", "source_id": "8d582fd9-8c4b-48bf-949b-3d2f353527c9"}
{"id": "mm-5a96d183", "content": "Gobby project uses a unified installer that copies CLI-specific commands via install_cli_content(). Each CLI has its own directory: Claude uses Markdown in src/gobby/install/claude/commands/ → .claude/commands/, Gemini uses TOML in src/gobby/install/gemini/commands/ → .gemini/commands/, and Codex uses Markdown in src/gobby/install/codex/prompts/ → .codex/prompts/.", "type": "fact", "importance": 0.95, "tags": ["architecture", "installer", "multi-cli", "file-paths"], "created_at": "2026-01-26T15:19:56.014629+00:00", "updated_at": "2026-01-26T15:19:56.014629+00:00", "source": "session", "source_id": "1f0eb083-9ebd-4c61-8ea3-0e9fd78037e2"}
{"id": "mm-1398a1ab", "content": "The gobby project uses a unified spawn_agent API design with these key parameters: prompt (required), agent='generic' (default), isolation='current'|'worktree'|'clone'. Anonymous spawning defaults to 'generic' agent which uses bundled generic-agent.yaml and generic-workflow.yaml templates.", "type": "fact", "importance": 0.95, "tags": ["spawn_agent", "API_design", "gobby", "agent_spawning"], "created_at": "2026-01-26T14:05:26.282092+00:00", "updated_at": "2026-01-26T14:05:26.282092+00:00", "source": "session", "source_id": "dc91e716-6e3a-4958-a18f-599e9bc18341"}
{"id": "mm-a3743a20", "content": "The gobby project uses a multi-CLI installation model with four supported CLIs: Claude, Gemini, Codex, and Antigravity. Workflow files must be maintained in three locations: source shared version (src/gobby/install/shared/workflows/), installed versions for each CLI (.claude/, .gemini/, .codex/, .antigravity/), and project-level versions (.gobby/workflows/).", "type": "fact", "importance": 0.95, "tags": ["architecture", "file-organization", "installation", "multi-cli"], "created_at": "2026-01-26T02:57:07.741841+00:00", "updated_at": "2026-01-26T02:57:07.741841+00:00", "source": "session", "source_id": "1d0c2cb9-eb49-4dc2-8480-b01ade18895e"}
{"id": "mm-052d36a2", "content": "In gobby's logging configuration, setup_file_logging() sets propagate=False on the gobby package logger to prevent duplicate logs. This breaks pytest's caplog fixture because caplog captures via root logger handlers and depends on propagation. Tests need either a fixture enabling propagate=True during test execution, or should avoid using caplog.at_level(logger='gobby.utils.git') in favor of capturing all logs.", "type": "context", "importance": 0.95, "tags": ["logging", "testing", "caplog", "pytest", "gobby-logger-config"], "created_at": "2026-01-25T20:04:09.517652+00:00", "updated_at": "2026-01-25T20:04:09.517652+00:00", "source": "session", "source_id": "4042c9be-18da-4d31-9039-027a93af8c78"}
{"id": "mm-3eb24810", "content": "The gobby project is transitioning workflows from global (~/.gobby/workflows/) to project-only (.gobby/workflows/) storage. This requires removing global_dirs defaults from WorkflowLoader, eliminating --global flags from CLI, and removing is_global parameters from MCP tools across: loader.py, hook_manager.py, cli/workflows.py, mcp_proxy/tools/workflows.py, and cli/installers/codex.py.", "type": "context", "importance": 0.95, "tags": ["workflows", "architecture-change", "refactoring-scope"], "created_at": "2026-01-25T18:46:30.280702+00:00", "updated_at": "2026-01-25T18:46:30.280702+00:00", "source": "session", "source_id": "598eabaa-1caa-40d8-8166-309b8ff8ba9c"}
{"id": "mm-86377881", "content": "gobby-skills is the single source of truth for bundled skills. It contains 24 skills total: 17 original gobby-* skills (gobby-agents, gobby-clones, gobby-diagnostic, gobby-expand, gobby-mcp, gobby-memory, gobby-merge, gobby-metrics, gobby-plan, gobby-sessions, gobby-tasks, gobby-workflows, gobby-worktrees) + 5 helper skills (claiming-tasks, committing-changes, discovering-tools, starting-sessions) + 7 quick task skills (bug, chore, epic, eval, feat, nit, ref). Duplicate skill directories in .claude/skills/gobby-* and .claude/commands/gobby/ should be deleted to maintain single source of truth.", "type": "fact", "importance": 0.95, "tags": ["gobby-skills", "architecture", "skill-organization"], "created_at": "2026-01-25T18:18:01.196567+00:00", "updated_at": "2026-01-25T18:18:01.196567+00:00", "source": "session", "source_id": "8ba09a43-3c3f-442c-9cdf-555cb2f38851"}
{"id": "mm-414c0ecb", "content": "Claude Code doesn't include tool_result in post-tool-use hooks, causing detection_helpers.py to receive empty tool_output dicts. This breaks error detection in detect_task_claim for close_task validation - when close_task fails validation (e.g., 'no_commits_linked'), the empty tool_output passes all error checks and incorrectly clears task_claimed=False.", "type": "fact", "importance": 0.95, "tags": ["claude-code-limitation", "detection_helpers", "close_task", "task_claimed", "bug-root-cause"], "created_at": "2026-01-25T17:14:28.198509+00:00", "updated_at": "2026-01-25T17:14:28.198509+00:00", "source": "session", "source_id": "b08118fe-cfa2-4c04-b92a-d381c05e7eda"}
{"id": "mm-a9c13ab0", "content": "Gobby requires explicit task claiming before file edits are permitted. Use create_task with claim: true parameter or claim_task tool to enable write access. The hook system enforces this via PreToolUse validation.", "type": "pattern", "importance": 0.95, "tags": ["task-management", "workflow", "write-access", "hooks"], "created_at": "2026-01-25T17:02:58.234367+00:00", "updated_at": "2026-01-25T17:02:58.234367+00:00", "source": "session", "source_id": "510d507d-f02a-47d5-8b8c-5c8fc2299ab3"}
{"id": "mm-ca8e2170", "content": "Gobby project uses a pre-commit hook system with linting and formatting checks. The format check (ruff) must pass before commits are allowed. Run `ruff format` to auto-format files if the format check fails.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "pre-commit", "ruff", "formatting", "workflow"], "created_at": "2026-01-30T17:13:43.667311+00:00", "updated_at": "2026-01-30T17:13:43.667311+00:00", "source": "session", "source_id": "31f73b76-a309-435c-811b-5a39722748f0"}
{"id": "mm-069e6f79", "content": "The gobby project uses a pre-tool hook system (hook_dispatcher.py) that validates commits before task closure. The close_task tool requires a commit_sha parameter and will fail if there are uncommitted changes or hook validation errors.", "type": "fact", "importance": 0.9, "tags": ["gobby", "workflow", "git", "hooks", "task-closure"], "created_at": "2026-01-30T16:29:54.065567+00:00", "updated_at": "2026-01-30T16:29:54.065567+00:00", "source": "session", "source_id": "04bda0d5-3cf3-4466-b393-dbb62e727e8b"}
{"id": "mm-020dc1d4", "content": "Task closure in gobby's MCP system requires using parameter name 'reason' (not 'comment' or other variants) when closing tasks. Parameter validation is strict and will reject unknown parameters.", "type": "pattern", "importance": 0.9, "tags": ["gobby", "mcp", "task-management", "api-parameters"], "created_at": "2026-01-30T05:36:12.763514+00:00", "updated_at": "2026-01-30T05:36:12.763514+00:00", "source": "session", "source_id": "abdf6562-8f03-4060-9691-0dc9911b674b"}
{"id": "mm-549f87a4", "content": "The Claude Agent SDK requires the Claude CLI to be installed separately. The SDK implementation should handle API key configuration with a fallback strategy: use ANTHROPIC_API_KEY if provided, otherwise use LiteLLM as the provider.", "type": "fact", "importance": 0.9, "tags": ["claude-agent-sdk", "dependencies", "api-configuration", "gobby"], "created_at": "2026-01-30T05:04:49.410967+00:00", "updated_at": "2026-01-30T05:04:49.410967+00:00", "source": "session", "source_id": "c4057c01-26f2-4c9f-bb02-7a23a7ce74dc"}
{"id": "mm-2ad2a720", "content": "SkillPort stores alwaysApply and injection_format metadata in nested metadata fields rather than as top-level database columns. Gobby's import strategy should extract these from SkillPort's metadata structure and decide whether to promote them to proper database columns.", "type": "fact", "importance": 0.9, "tags": ["gobby", "skillport", "database-schema", "metadata", "import-strategy"], "created_at": "2026-01-30T04:54:39.993922+00:00", "updated_at": "2026-01-30T04:54:39.993922+00:00", "source": "session", "source_id": "7786b710-a431-44cc-aba7-bff0ec576229"}
{"id": "mm-9a22b546", "content": "The project has a pre-commit verification process (`Gobby pre-commit verification`) that runs linting checks. All code changes must pass linting before commits are accepted, and unused imports (e.g., F401 violations from ruff) will cause verification failures.", "type": "fact", "importance": 0.9, "tags": ["gobby", "linting", "pre-commit", "verification", "ruff"], "created_at": "2026-01-30T04:36:22.756820+00:00", "updated_at": "2026-01-30T04:36:22.756820+00:00", "source": "session", "source_id": "576ddb2b-5717-412d-bfaa-4a118cf3668e"}
{"id": "mm-7b91f069", "content": "There are 155 memories in the database with NULL project_id values that need to be updated to use the project_id from their associated source/session. This is a data integrity issue that requires migration.", "type": "context", "importance": 0.9, "tags": ["gobby", "data-integrity", "migration", "project_id"], "created_at": "2026-01-30T01:27:17.885489+00:00", "updated_at": "2026-01-30T01:27:17.885489+00:00", "source": "session", "source_id": "daf9fa89-b207-4674-acb3-f6c28bebb609"}
{"id": "mm-6e09164e", "content": "Gobby project uses `uv run ruff check src/` for linting and `uv run ruff format --check src/` for formatting checks. Pre-commit hooks are configured but pre-commit tool may not be globally installed; use `uv run pre-commit run --all-files` instead.", "type": "fact", "importance": 0.9, "tags": ["gobby", "linting", "formatting", "build-tools", "uv", "ruff"], "created_at": "2026-01-29T23:57:38.876770+00:00", "updated_at": "2026-01-29T23:57:38.876770+00:00", "source": "session", "source_id": "52c06440-8de4-4444-aa93-18176fd73e97"}
{"id": "mm-324dd652", "content": "The gobby project has dead code: `read_prompt_from_env()` function and environment variables `GOBBY_PROMPT` and `GOBBY_SYSTEM_PROMPT` are defined but only called in a test file (tests/integration/test_terminal_mode_worktrees.py), not used in actual agent spawning logic. These should be removed as part of decoupling agent spawning from environment variable dependencies.", "type": "fact", "importance": 0.9, "tags": ["gobby", "dead-code", "env-vars", "cleanup", "agent-spawning"], "created_at": "2026-01-29T23:49:24.402457+00:00", "updated_at": "2026-01-29T23:49:24.402457+00:00", "source": "session", "source_id": "bac9e680-2612-49f0-809c-a1d79f478dfe"}
{"id": "mm-7821fc44", "content": "The gobby project uses a hook system located at .claude/hooks/hook_dispatcher.py that runs pre-tool and stop hooks. The .gobby/ directory should be excluded from CI/CD and pre-commit triggers to prevent hook feedback loops.", "type": "fact", "importance": 0.9, "tags": ["project-structure", "hooks", "gobby-directory", "ci-cd"], "created_at": "2026-01-29T23:06:08.785197+00:00", "updated_at": "2026-01-29T23:06:08.785197+00:00", "source": "session", "source_id": "0d0a35d4-a860-4acd-83a3-4625dac1a658"}
{"id": "mm-addfb2e0", "content": "The gobby project has 9,218 tests missing pytest markers and 766 fixtures missing type hints. User chose to fix both issues comprehensively rather than scope them partially.", "type": "context", "importance": 0.9, "tags": ["gobby", "testing", "markers", "type-hints", "scope"], "created_at": "2026-01-29T21:45:31.985994+00:00", "updated_at": "2026-01-29T21:45:31.985994+00:00", "source": "session", "source_id": "df3424d0-eb12-487c-9660-a57c1cfdd398"}
{"id": "mm-8c14c838", "content": "Gobby project uses a pre-commit hook wrapper (located in git hooks) that runs `gobby hooks` command which executes lint and format checks. The hook passes/fails based on these checks before allowing commits.", "type": "fact", "importance": 0.9, "tags": ["gobby", "git-hooks", "pre-commit", "build-process"], "created_at": "2026-01-29T18:00:52.411859+00:00", "updated_at": "2026-01-29T18:00:52.411859+00:00", "source": "session", "source_id": "2dcac329-a0f3-483f-bccd-e19d16e2f625"}
{"id": "mm-05096ffa", "content": "The gobby project is standardizing session_id format to 'Accept #N' across the codebase. This involves updating tool definitions, implementation code, and documentation—32 tools were identified that need updates as part of this standardization effort.", "type": "context", "importance": 0.9, "tags": ["gobby", "session_id-standardization", "ongoing-work"], "created_at": "2026-01-29T17:41:53.873807+00:00", "updated_at": "2026-01-29T17:41:53.873807+00:00", "source": "session", "source_id": "a506fc5b-8ab1-46b2-a51d-70c731443a33"}
